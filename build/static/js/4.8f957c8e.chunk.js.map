{"version":3,"sources":["components/utils/constants.js","components/services/HttpService.js","components/services/CalculatorService.js","components/page/Calculator/Location.jsx","components/page/Calculator/Calculator.jsx","components/page/Calculator/index.js"],"names":["BASE_URL_API","dateByVal","val","moment","get","client","axios","create","timeout","baseURL","interceptors","request","use","config","error","Promise","reject","response","data","APP_PRODUCT","APP_LOCATION","APP_CARD","Location","React","memo","_ref","place","units","cost","console","log","react_default","a","createElement","Fragment","className","defaultProps","Calculator","_useState","useState","_useState2","Object","slicedToArray","loading","setLoading","_useState3","_useState4","isSubmit","setIsSubmit","_useState5","_useState6","products","setProducts","_useState7","_useState8","locations","setLocations","_useState9","_useState10","date","setDate","_useState11","_useState12","product","setProduct","_useState13","_useState14","setUnits","_useState15","_useState16","price","setPrice","handleSubmit","asyncToGenerator","regenerator_default","mark","_callee","e","params","res","wrap","_context","prev","next","preventDefault","alert","abrupt","id","quantity","post","sent","status","t0","finish","stop","_x","apply","this","arguments","_customDate","curentDate","Date","getDate","fromDate","format","min","max","add","customDate","handleGetProduct","_ref2","_callee2","_context2","handleGetLocation","_ref3","_callee3","_context3","handleMaxPro","maxPro","key","keys","length","handleLocationUnit","maxDist","max_dist","resetDate","useEffect","onSubmit","name","onChange","_ref4","target","value","map","p","type","_ref5","numberKey","d","currentDate","getNumberKey","objMaxPro","filter","max_production","price_per_unit","Calculator_Location","__webpack_require__","__webpack_exports__","page_Calculator_Calculator"],"mappings":"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","file":"static/js/4.8f957c8e.chunk.js","sourcesContent":["import moment from \"moment\";\n\nexport const BASE_URL_API = \"https://5efabb3a80d8170016f758ee.mockapi.io\";\nexport const REQUEST_TIME_OUT = 1000000;\n\nexport const customDate = () => {\n  const curentDate = new Date();\n  curentDate.setDate(curentDate.getDate() + 1);\n  const fromDate = moment(curentDate).format(\"YYYY-MM-DD\");\n  const toDate = moment(fromDate).add(7, \"days\").format(\"YYYY-MM-DD\");\n  return { min: fromDate, max: toDate };\n};\n\nexport const dateByVal = (val) => {\n  return moment(val).get(\"date\");\n};\n\nexport const getNumberKey = (date) => {\n  const d = new Date();\n  const currentDate = dateByVal(d);\n  const dateByChoose = dateByVal(date);\n  return dateByChoose - currentDate;\n};\n","import axios from \"axios\";\nimport { REQUEST_TIME_OUT, BASE_URL_API } from \"../utils/constants\";\n\nconst client = axios.create({\n  timeout: REQUEST_TIME_OUT,\n  baseURL: BASE_URL_API\n});\n\nclient.interceptors.request.use(\n  (config) => {\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\nclient.interceptors.response.use(\n  (response) => {\n    return response.data;\n  },\n  (error) => Promise.reject(error)\n);\n\nexport default client;\n","import client from \"./HttpService\";\nimport { BASE_URL_API } from \"../utils/constants\";\n\nconst APP_PRODUCT = \"/products\";\nconst APP_LOCATION = \"/locations\";\nconst APP_CARD = \"/cart\";\n\nexport function getProduct() {\n  return client.get(BASE_URL_API + APP_PRODUCT);\n}\n\nexport function getLocation() {\n  return client.get(BASE_URL_API + APP_LOCATION);\n}\n\nexport function addToCard(request) {\n  return client.post(BASE_URL_API + APP_CARD, request);\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst Location = React.memo(({ place, units, cost }) => {\n  console.log(\"render\");\n  return (\n    <React.Fragment>\n      <label>Locations</label>\n      <div className=\"location\">\n        <div className=\"location-item\">\n          <label>Place</label>\n          <div className=\"\">{place}</div>\n        </div>\n        <div className=\"location-item\">\n          <label>Units</label>\n          <div className=\"\">{units}</div>\n        </div>\n        <div className=\"location-item\">\n          <label>Cost</label>\n          <div className=\"\">{cost}</div>\n        </div>\n      </div>\n    </React.Fragment>\n  );\n});\n\nLocation.defaultProps = {\n  place: null,\n  units: 0,\n  cost: 0\n};\n\nLocation.propTypes = {\n  place: PropTypes.object,\n  units: PropTypes.number,\n  cost: PropTypes.number\n};\n\nexport default Location;\n","import React, { useEffect, useState } from \"react\";\nimport { getProduct, getLocation, addToCard } from \"../../services/CalculatorService\";\nimport { customDate, getNumberKey } from \"../../utils/constants\";\nimport Location from \"./Location\";\nimport \"./Calculator.scss\";\n\n// requirement (do not need to do ADD LOCATION), so i'm assigned location with id = 4\n\nconst Calculator = () => {\n  const [loading, setLoading] = useState(false);\n  const [isSubmit, setIsSubmit] = useState(false);\n  const [products, setProducts] = useState([]);\n  const [locations, setLocations] = useState([]);\n  const [date, setDate] = useState(\"\");\n  const [product, setProduct] = useState(\"\");\n  const [units, setUnits] = useState(0);\n  const [price, setPrice] = useState(0);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!date || !product) {\n      alert(\"Please choose product or date\");\n      return;\n    }\n    const params = {\n      date: date,\n      product: product,\n      locations: {\n        id: 4,\n        quantity: units\n      }\n    };\n\n    console.log(\"submit\", params);\n    try {\n      setIsSubmit(true);\n      const res = await addToCard(params);\n      if (res && res.status === \"success\") {\n        alert(\"Complete!\");\n      }\n      console.log(res);\n    } catch (errors) {\n      console.log(errors);\n    } finally {\n      setIsSubmit(false);\n    }\n  };\n\n  // Get date custom\n  const { min, max } = customDate();\n\n  const handleGetProduct = async () => {\n    try {\n      const res = await getProduct();\n      console.log(res);\n      setProducts(res);\n    } catch (errors) {\n      console.log(errors);\n    } finally {\n      console.log(\"finally\");\n    }\n  };\n\n  const handleGetLocation = async () => {\n    try {\n      setLoading(true);\n      const res = await getLocation();\n      console.log(res);\n      setLocations(res);\n    } catch (errors) {\n      console.log(errors);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleProduct = ({ target }) => setProduct(target.value);\n\n  const handleDate = ({ target }) => {\n    if (!product) {\n      alert(\"Please select product !\");\n      resetDate();\n      return;\n    }\n    const numberKey = getNumberKey(target.value);\n    if (numberKey && numberKey > 0) {\n      const objMaxPro = products.filter((p) => p.id === product)[0];\n      const units = handleMaxPro(objMaxPro.max_production, numberKey);\n      console.log(units);\n      handleLocationUnit(units, target.value);\n      setPrice(objMaxPro.price_per_unit);\n    }\n  };\n\n  // If the number of days in the future the user has picked is greater than the largest days key then use the largest key\n  const handleMaxPro = (maxPro, key) => {\n    if (!maxPro[key]) {\n      const lastItem = Object.keys(maxPro)[Object.keys(maxPro).length - 1];\n      return maxPro[lastItem];\n    }\n    return maxPro[key];\n  };\n\n  // Also the total sum of all location units cannot be larger than the available production for that date and product\n  const handleLocationUnit = (units, date) => {\n    const maxDist = locations[3].max_dist;\n    console.log(maxDist, \"max_dist\");\n    if (units > maxDist) {\n      alert(\"The location units cannot be larger than the locations Max Distribution value\");\n      resetDate();\n      return;\n    }\n    setDate(date);\n    setUnits(units);\n  };\n\n  const resetDate = () => setDate(\"\");\n\n  useEffect(() => {\n    handleGetProduct();\n    handleGetLocation();\n  }, []);\n\n  if (loading) return <div>loading...</div>;\n\n  return (\n    <main className=\"main\">\n      <div className=\"cal-form\">\n        <form onSubmit={handleSubmit}>\n          <div className=\"cal-form__field\">\n            <label>Product</label>\n            <select name=\"product\" onChange={handleProduct}>\n              <option value=\"\">choose</option>\n              {products.map((p) => {\n                return (\n                  <option key={p.id} value={p.id}>\n                    {p.name}\n                  </option>\n                );\n              })}\n            </select>\n          </div>\n          <div className=\"cal-form__field\">\n            <label>Date</label>\n            <input type=\"date\" value={date} min={min} max={max} name=\"date\" id=\"date\" onChange={handleDate} />\n          </div>\n          <div className=\"cal-form__field\">\n            <Location place={locations[3]} units={units} cost={units * price} />\n          </div>\n          <div className=\"cal-form__field\">\n            <label>Total Units</label>\n            <div>{units}</div>\n          </div>\n          <div className=\"cal-form__field\">\n            <label>Total Cost</label>\n            <div>{units * price}</div>\n          </div>\n\n          {isSubmit ? (\n            <div>Loading...</div>\n          ) : (\n            <button type=\"submit\" className=\"btn\">\n              Submit\n            </button>\n          )}\n        </form>\n      </div>\n    </main>\n  );\n};\n\nexport default Calculator;","export { default } from \"./Calculator\";\n"],"sourceRoot":""}